<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
        <title>Hackybara Accounting - Profile</title>
        <link rel="icon" href="../icon/icon.png" type="image/x-icon">
        <script src="../js/script.js" defer></script>
        <script>
            // JavaScript functions
            function openNav() {
                document.getElementById("mySidenav").classList.remove("hidden");
                document.getElementById("mySidenav").classList.add("block");
            }
            
            function closeNav() {
                document.getElementById("mySidenav").classList.remove("block");
                document.getElementById("mySidenav").classList.add("hidden");
            }
            
            function logout() {
                alert("Logout functionality would go here");
            }
            
            // Function to preview image before upload
            function previewImage(event) {
                const reader = new FileReader();
                reader.onload = function() {
                    const output = document.getElementById('profilePreview');
                    output.src = reader.result;
                    document.getElementById('removeImage').classList.remove('hidden');
                }
                reader.readAsDataURL(event.target.files[0]);
            }
            
            // Function to remove profile image
            function removeImage() {
                document.getElementById('profilePreview').src = "../img/tnlogo.png";
                document.getElementById('profileImage').value = "";
                document.getElementById('removeImage').classList.add('hidden');
            }
            
            // Function to toggle password visibility
            function togglePasswordVisibility(fieldId, toggleId) {
                const passwordField = document.getElementById(fieldId);
                const toggleIcon = document.getElementById(toggleId);
                
                if (passwordField.type === "password") {
                    passwordField.type = "text";
                    toggleIcon.textContent = "visibility_off";
                } else {
                    passwordField.type = "password";
                    toggleIcon.textContent = "visibility";
                }
            }
            
            // Function to handle form submission
            function handleProfileUpdate(e) {
                e.preventDefault();
                alert("Profile updated successfully!");
            }
            
            function handlePasswordUpdate(e) {
                e.preventDefault();
                
                const currentPassword = document.getElementById('currentPassword').value;
                const newPassword = document.getElementById('newPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                if (newPassword !== confirmPassword) {
                    alert("New passwords don't match!");
                    return;
                }
                
                alert("Password updated successfully!");
            }
        </script>
        <style>
            .material-symbols-outlined {
                font-variation-settings:
                'FILL' 0,
                'wght' 400,
                'GRAD' 0,
                'opsz' 24
            }
        </style>
    </head>
    <body class="bg-gray-100">
        <!--NAVIGATION BAR-->
            <!--NAVIGATION BAR-->
            <div id="navbar"></div>
        
        <div class="container flex mt-20">
            <!--ASIDE SECTION START-->
            <div id="sidebar"></div>
            <!--ASIDE SECTION END-->

            <!--MAIN SECTION START-->
            <main class="flex-1 md:ml-64 p-6">
                <div class="titledate flex justify-between items-center mb-6">
                    <h1 class="text-2xl font-bold">Profile Settings</h1>
                </div>

                <!-- Profile Update Card -->
                <div class="bg-white p-6 rounded-lg shadow-sm mb-6">
                    <h2 class="text-xl font-semibold mb-4 text-gray-700">Profile Information</h2>
                    
                    <div class="flex flex-col md:flex-row gap-6 mb-6">
                        <!-- Profile Picture Section -->
                        <div class="md:w-1/3">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Profile Picture</label>
                            <div class="flex flex-col items-center">
                                <div class="relative mb-4">
                                    <img id="profilePreview" src="../img/tnlogo.png" alt="Profile Preview" class="w-32 h-32 rounded-full object-cover border-2 border-blue-500">
                                    <button id="removeImage" onclick="removeImage()" class="hidden absolute top-0 right-0 bg-red-500 text-white rounded-full p-1">
                                        <span class="material-symbols-outlined text-sm">close</span>
                                    </button>
                                </div>
                                <label for="profileImage" class="cursor-pointer bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors text-sm">
                                    <span class="material-symbols-outlined align-text-bottom text-sm">file_upload</span>
                                    Upload Image
                                </label>
                                <input type="file" id="profileImage" accept="image/*" class="hidden" onchange="previewImage(event)">
                                <p class="text-xs text-gray-500 mt-2">JPG, PNG or GIF. Max 2MB.</p>
                            </div>
                        </div>
                        
                        <!-- Profile Form Section -->
                        <div class="md:w-2/3">
                            <form id="profileForm" onsubmit="handleProfileUpdate(event)">
                                <div class="grid grid-cols-1 gap-4">
                                    <div>
                                        <label for="businessName" class="block text-sm font-medium text-gray-700 mb-1">Business Name</label>
                                        <input 
                                            type="text" 
                                            id="businessName" 
                                            class="w-full p-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500" 
                                            value="Hackybara Solutions"
                                            required
                                        >
                                    </div>
                                    <div>
                                        <label for="fullName" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                                        <input 
                                            type="text" 
                                            id="userNameInput" 
                                            class="w-full p-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500" 
                                            value=""
                                            required
                                        >
                                    </div>
                                    <div>
                                        <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                                        <input 
                                            type="email" 
                                            id="email" 
                                            class="w-full p-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500" 
                                            value="hilmi@hackybara.com"
                                            required
                                        >
                                    </div>
                                    <div>
                                        <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                                        <input 
                                            type="tel" 
                                            id="phone" 
                                            class="w-full p-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500" 
                                            value="+1 (555) 123-4567"
                                        >
                                    </div>
                                </div>
                                <div class="mt-6 flex justify-end">
                                    <button 
                                        type="submit" 
                                        class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors"
                                    >
                                        Save Changes
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Password Update Card -->
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h2 class="text-xl font-semibold mb-4 text-gray-700">Change Password</h2>
                    
                    <form id="passwordForm" onsubmit="handlePasswordUpdate(event)">
                        <div class="grid grid-cols-1 gap-4 mb-6">
                            <div>
                                <label for="currentPassword" class="block text-sm font-medium text-gray-700 mb-1">Current Password</label>
                                <div class="relative">
                                    <input 
                                        type="password" 
                                        id="currentPassword" 
                                        class="w-full pl-3 pr-10 p-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500" 
                                        placeholder="Enter current password"
                                        required
                                    >
                                    <span class="material-symbols-outlined absolute right-3 top-3 text-gray-400 cursor-pointer" id="toggleCurrentPassword" onclick="togglePasswordVisibility('currentPassword', 'toggleCurrentPassword')">visibility</span>
                                </div>
                            </div>
                            <div>
                                <label for="newPassword" class="block text-sm font-medium text-gray-700 mb-1">New Password</label>
                                <div class="relative">
                                    <input 
                                        type="password" 
                                        id="newPassword" 
                                        class="w-full pl-3 pr-10 p-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500" 
                                        placeholder="Enter new password"
                                        required
                                    >
                                    <span class="material-symbols-outlined absolute right-3 top-3 text-gray-400 cursor-pointer" id="toggleNewPassword" onclick="togglePasswordVisibility('newPassword', 'toggleNewPassword')">visibility</span>
                                </div>
                                <p class="mt-1 text-xs text-gray-500">Must be at least 8 characters</p>
                            </div>
                            <div>
                                <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-1">Confirm New Password</label>
                                <div class="relative">
                                    <input 
                                        type="password" 
                                        id="confirmPassword" 
                                        class="w-full pl-3 pr-10 p-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500" 
                                        placeholder="Confirm new password"
                                        required
                                    >
                                    <span class="material-symbols-outlined absolute right-3 top-3 text-gray-400 cursor-pointer" id="toggleConfirmPassword" onclick="togglePasswordVisibility('confirmPassword', 'toggleConfirmPassword')">visibility</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-end">
                            <button 
                                type="submit" 
                                class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors"
                            >
                                Update Password
                            </button>
                        </div>
                    </form>
                </div>
            </main>
            <!--MAIN SECTION END--> 
        </div>
    </body>
    <script>
        // Sidebar and navbar includes via JS
        function loadInclude(id, file) {
            fetch(file)
                .then(response => response.text())
                .then(html => {
                    document.getElementById(id).innerHTML = html;
                });
        }
    loadInclude('navbar', './navbar.html');
    loadInclude('sidebar', './sidebar.html');
    loadInclude('sidebar-mobile', './sidebar_mobile.html');
    </script>
</html>